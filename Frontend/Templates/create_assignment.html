<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Assignment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .form-container { max-width: 700px; margin: 40px auto; padding: 30px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em; }
        textarea { resize: vertical; min-height: 100px; }
        .btn { padding: 12px 30px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; }
        .btn:hover { background: #0056b3; }
        .btn-secondary { background: #6c757d; margin-left: 10px; }
        .btn-secondary:hover { background: #5a6268; }
        .reward-info { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 10px; font-size: 0.9em; color: #555; }
        .reward-option { margin: 10px 0; padding: 10px; border: 2px solid #e9ecef; border-radius: 5px; cursor: pointer; }
        .reward-option:hover { border-color: #007bff; background: #f8f9fa; }
        .reward-option input[type="radio"] { margin-right: 10px; }
        .reward-title { font-weight: bold; color: #333; }
        .reward-desc { color: #666; font-size: 0.9em; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Create New Assignment</h1>
        <p style="color: #666; margin-bottom: 30px;">Set up an assignment with AI-powered early submission rewards</p>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST">
            <div class="form-group">
                <label for="title">Assignment Title *</label>
                <input type="text" id="title" name="title" required placeholder="e.g., Data Structures Assignment 1">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" placeholder="Provide details about the assignment..."></textarea>
            </div>

            <div class="form-group">
                <label for="subject">Subject *</label>
                <input type="text" id="subject" name="subject" required placeholder="e.g., Computer Science">
            </div>

            <div class="form-group">
                <label for="deadline">Submission Deadline *</label>
                <input type="datetime-local" id="deadline" name="deadline" required>
            </div>

            <div class="form-group">
                <label for="max_bonus_marks">Maximum Bonus Marks *</label>
                <input type="number" id="max_bonus_marks" name="max_bonus_marks" step="0.5" min="0.5" max="10" required placeholder="e.g., 5">
                <small style="color: #666;">Maximum internal marks that can be awarded for early submission</small>
            </div>

            <div class="form-group">
                <label>Reward Calculation Type *</label>
                
                <div class="reward-option">
                    <input type="radio" id="tier" name="reward_type" value="tier" checked>
                    <label for="tier" style="display: inline; cursor: pointer;">
                        <div class="reward-title">üéØ Tier-Based Reward (Recommended)</div>
                        <div class="reward-desc">
                            ‚Ä¢ Submit within 25% of time: 100% bonus<br>
                            ‚Ä¢ Submit within 50% of time: 75% bonus<br>
                            ‚Ä¢ Submit within 75% of time: 50% bonus<br>
                            ‚Ä¢ Submit before deadline: 25% bonus
                        </div>
                    </label>
                </div>

                <div class="reward-option">
                    <input type="radio" id="scaling" name="reward_type" value="scaling">
                    <label for="scaling" style="display: inline; cursor: pointer;">
                        <div class="reward-title">üìä Linear Scaling</div>
                        <div class="reward-desc">
                            Bonus decreases linearly with time. Earlier submissions get proportionally higher rewards.
                        </div>
                    </label>
                </div>

                <div class="reward-option">
                    <input type="radio" id="fixed" name="reward_type" value="fixed">
                    <label for="fixed" style="display: inline; cursor: pointer;">
                        <div class="reward-title">‚úÖ Fixed Reward</div>
                        <div class="reward-desc">
                            Full bonus for any submission before the deadline. Simple and straightforward.
                        </div>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>Submission Mode *</label>
                
                <div class="reward-option">
                    <input type="radio" id="offline" name="submission_mode" value="offline" checked>
                    <label for="offline" style="display: inline; cursor: pointer;">
                        <div class="reward-title">üìÑ Offline Submission</div>
                        <div class="reward-desc">
                            Students mark as submitted online, then submit physical work to you for verification.
                        </div>
                    </label>
                </div>

                <div class="reward-option">
                    <input type="radio" id="online" name="submission_mode" value="online">
                    <label for="online" style="display: inline; cursor: pointer;">
                        <div class="reward-title">üíª Online Submission</div>
                        <div class="reward-desc">
                            Students upload PDF files online. You can download and verify submissions digitally.
                        </div>
                    </label>
                </div>
            </div>

            <div class="reward-info">
                <strong>‚ÑπÔ∏è How It Works:</strong><br>
                1. Students submit assignments before the deadline<br>
                2. AI automatically calculates bonus marks based on submission timing<br>
                3. You review and approve submissions<br>
                4. Approved bonus marks are added to student's internal marks
            </div>

            <div style="margin-top: 30px;">
                <button type="submit" class="btn">Create Assignment</button>
                <a href="{{ url_for('faculty_assignments') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>

    <script>
        // Set minimum deadline to current time
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        document.getElementById('deadline').min = now.toISOString().slice(0, 16);
    </script>
</body>
</html>
